{"version":3,"sources":["components/Box/Box.js","pages/Play/Play.js"],"names":["Box","handleClick","props","onResult","isWinner","handleKeyPress","e","preventDefault","charCode","keyCode","type","className","aria-label","data-reveal","this","reveal","data-is-winner","style","backgroundColor","onClick","onKeyPress","React","Component","Play","state","played","winnerBox","createRef","handleCheating","current","handleResults","a","history","pathname","location","url","setState","message","title","text","icon","Swal","fire","timer","timerProgressBar","showCancelButton","showConfirmButton","level","push","boxes","columns","rows","hue","luminosity","saturation","numberOfBoxes","thebox","Math","floor","random","luxMax","luxMin","index","lux","key","ref","footer","role","gridTemplateColumns","gridTemplateRows"],"mappings":"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","file":"static/js/4.8114dcfd.chunk.js","sourcesContent":["// React\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// Styles\nimport './Style.scss';\n\n// Declaration\nexport default class Box extends React.Component {\n\n    handleClick = () => {\n\n        typeof this.props.onResult === 'function' && this.props.onResult(\n            this.props.isWinner\n        );\n\n    };\n\n    handleKeyPress = e => {\n\n        e.preventDefault();\n\n        if( e.charCode === 13 || e.keyCode === 13 )\n            this.handleClick();\n\n    };\n\n    render() {\n\n        return (\n            <button\n                type=\"button\"\n                className=\"box\"\n                aria-label=\"Click me\"\n                data-reveal={ this.props.reveal }\n                data-is-winner={ this.props.isWinner }\n                style={\n                    {\n                        backgroundColor: this.props.backgroundColor,\n                    }\n                }\n                onClick={ this.handleClick }\n                onKeyPress={ this.handleKeyPress }\n            />\n        );\n\n    }\n\n}\n\n// Validations\nBox.propTypes = {\n    backgroundColor: PropTypes.string,\n    reveal: PropTypes.bool,\n    onResult: PropTypes.func,\n    isWinner: PropTypes.bool,\n};\n","// React\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// Third parties\nimport Swal from 'sweetalert2';\n\n// Components\nimport Box from '../../components/Box/Box';\n\n// Style\nimport './Style.scss';\n\n// Declaration\nexport default class Play extends React.Component {\n\n    state = {\n        played: this.props.played,\n        winnerBox: React.createRef(),\n    };\n\n    handleCheating = () => {\n\n        this.state.winnerBox && this.state.winnerBox.current && this.state.winnerBox.current.handleClick();\n\n    };\n\n    handleResults = async isWinner => {\n\n        const {\n            history,\n            location: { pathname },\n        } = this.props;\n\n        let url = pathname;\n\n        // TODO: This should be done better, it re-render the grid after clicking on a Box.\n        ! this.props.played && this.setState(\n            {\n                played: true,\n            }\n        );\n\n        const message = isWinner\n            ? {\n                title: 'Yeah ðŸŽ‰',\n                text: 'Fly to the next level!',\n                icon: 'success',\n            }\n            : {\n                title: 'Ops.. ðŸ˜Ÿ',\n                text: 'You clicked the wrong box',\n                icon: 'error',\n            }\n        ;\n\n        await Swal.fire(\n            {\n                ... message,\n                timer: 6300,\n                timerProgressBar: true,\n                showCancelButton: false,\n                showConfirmButton: false,\n            }\n        );\n\n        if( isWinner ) {\n\n            switch( pathname ) {\n                case '/hard':\n                    url = `/you-win/${ this.props.level }`;\n                    break;\n                case '/medium':\n                    url = '/hard';\n                    break;\n                case '/easy':\n                default:\n                    url = '/medium';\n            }\n\n        } else\n            url = `/game-over/${ this.props.level }`;\n\n        history.push(\n            url\n        );\n\n    };\n\n    componentDidUpdate( { played } ) {\n\n        if( played !== this.props.played ) {\n\n            this.setState(\n                {\n                    played: this.props.played,\n                }\n            );\n\n        }\n\n    }\n\n    render() {\n\n        // Boxes\n        const boxes = []\n            // Data\n            , {\n                level,\n                columns,\n                rows,\n                hue,\n                luminosity,\n                saturation,\n            } = this.props\n            , numberOfBoxes = columns * rows\n            , thebox = Math.floor(\n                Math.random() * Math.floor(\n                    columns * rows\n                )\n            )\n            // Colors\n            , luxRangeMin = Math.random()\n            , luxRangeMax = Math.random()\n            , luxMax = luminosity * luxRangeMin * 0.6\n            , luxMin = 1 - ( luminosity * luxRangeMax ) * 0.6\n        ;\n\n        for( let index = 0; index < numberOfBoxes; index ++ ) {\n\n            const isWinner = index === thebox\n                , lux = (\n                    isWinner\n                        ? luxMin\n                        : luxMax\n                )\n                , backgroundColor = `hsl( ${ hue }deg ${ ( lux * 100 ) }% ${ ( saturation * 100 ) }% )`\n            ;\n\n            boxes.push(\n                (\n                    <li key={ `${ level }-${ index }` }>\n                        <Box\n                            isWinner={ isWinner }\n                            onResult={ this.handleResults }\n                            backgroundColor={ backgroundColor }\n                            reveal={ this.state.played }\n                            ref={ isWinner ? this.state.winnerBox : null }\n                        />\n                    </li>\n                )\n            );\n\n        }\n\n        const footer = this.props.played\n            ? null\n            : (\n                <footer className=\"cheating\">\n                    <span className=\"arrow\">&raquo;</span>\n                    <button\n                        type=\"button\"\n                        className=\"btn btn--medium btn btn--border text--white bg--primary\"\n                        onClick={ this.handleCheating }\n                    >\n                        <strong>\n                            CHEAT\n                            <span role=\"img\" aria-label=\"Angry Emoji\">ðŸ˜¤</span>\n                        </strong>\n                    </button>\n                    <span className=\"arrow\">&laquo;</span>\n                </footer>\n            )\n        ;\n\n        return (\n            <section className=\"page play\">\n                <header>\n                    <h3>\n                        [ Spot the tile ]\n                        <sup className=\"counter\">\n                            <small>level { level }</small>\n                        </sup>\n                    </h3>\n                </header>\n                <ul\n                    className=\"board\"\n                    style={\n                        {\n                            gridTemplateColumns: `repeat( ${ columns }, 1fr )`,\n                            gridTemplateRows: `repeat( ${ rows }, 1fr )`,\n                        }\n                    }\n                >\n                    { boxes }\n                </ul>\n                { footer }\n            </section>\n        );\n\n    }\n\n}\n\n// Validations\nPlay.propTypes = {\n    // Grid game\n    level: PropTypes.oneOfType(\n        [\n            PropTypes.string,\n            PropTypes.number,\n        ]\n    ),\n    columns: PropTypes.string,\n    rows: PropTypes.string,\n    played: PropTypes.bool,\n    // Colors\n    hue: PropTypes.number.isRequired,\n    luminosity: PropTypes.number.isRequired,\n    saturation: PropTypes.number.isRequired,\n    // Router\n    history: PropTypes.shape(\n        {\n            push: PropTypes.func.isRequired,\n        }\n    ),\n    location: PropTypes.shape(\n        {\n            pathname: PropTypes.string.isRequired,\n        }\n    ),\n};\n"],"sourceRoot":""}