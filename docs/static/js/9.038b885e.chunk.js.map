{"version":3,"sources":["pages/Play/Play.js"],"names":["Box","React","lazy","Play","state","played","props","winnerBox","createRef","handleCheating","current","handleClick","handleResults","isWinner","a","history","pathname","location","url","setState","message","title","text","icon","Swal","fire","timer","timerProgressBar","showCancelButton","showConfirmButton","level","push","this","boxes","columns","rows","hue","luminosity","saturation","numberOfBoxes","thebox","Math","floor","random","luxMax","luxMin","index","lux","backgroundColor","key","Suspense","fallback","className","onResult","reveal","ref","footer","type","onClick","role","aria-label","style","gridTemplateColumns","gridTemplateRows","Component"],"mappings":"iUAWMA,G,OAAMC,IAAMC,MACd,kBAAM,kCAMWC,E,4MAEjBC,MAAQ,CACJC,OAAQ,EAAKC,MAAMD,OACnBE,UAAWN,IAAMO,a,EAGrBC,eAAiB,WAEb,EAAKL,MAAMG,WAAa,EAAKH,MAAMG,UAAUG,SAAW,EAAKN,MAAMG,UAAUG,QAAQC,e,EAIzFC,c,uCAAgB,WAAMC,GAAN,uBAAAC,EAAA,+DAKR,EAAKR,MAFLS,EAHQ,EAGRA,QACYC,EAJJ,EAIRC,SAAYD,SAGZE,EAAMF,GAER,EAAKV,MAAMD,QAAU,EAAKc,SACxB,CACId,QAAQ,IAIVe,EAAUP,EACV,CACEQ,MAAO,oBACPC,KAAM,yBACNC,KAAM,WAER,CACEF,MAAO,qBACPC,KAAM,4BACNC,KAAM,SAxBF,SA4BNC,IAAKC,KAAL,2BAEML,GAFN,IAGEM,MAAO,KACPC,kBAAkB,EAClBC,kBAAkB,EAClBC,mBAAmB,KAlCf,WAsCRhB,EAtCQ,sBAwCAG,EAxCA,OAyCC,UAzCD,QA4CC,YA5CD,uCA0CAE,EAAG,mBAAgB,EAAKZ,MAAMwB,OA1C9B,oCA6CAZ,EAAM,QA7CN,6BAiDAA,EAAM,UAjDN,gCAqDRA,EAAG,qBAAkB,EAAKZ,MAAMwB,OArDxB,QAuDZf,EAAQgB,KACJb,GAxDQ,4C,0HA6DiB,EAAXb,SAEH2B,KAAK1B,MAAMD,QAEtB2B,KAAKb,SACD,CACId,OAAQ2B,KAAK1B,MAAMD,W,+BAkC/B,IAvBM,IAAA4B,EAAQ,GAAR,EASED,KAAK1B,MANLwB,EAHF,EAGEA,MACAI,EAJF,EAIEA,QACAC,EALF,EAKEA,KACAC,EANF,EAMEA,IACAC,EAPF,EAOEA,WACAC,EARF,EAQEA,WAEFC,EAAgBL,EAAUC,EAC1BK,EAASC,KAAKC,MACZD,KAAKE,SAAWF,KAAKC,MACjBR,EAAUC,IAMhBS,EAASP,EAFKI,KAAKE,SAEiB,GACpCE,EAAS,EAAMR,EAFDI,KAAKE,SAEyB,GAGzCG,EAAQ,EAAGA,EAAQP,EAAeO,IAAW,CAElD,IAAMjC,EAAWiC,IAAUN,EACrBO,EACElC,EACMgC,EACAD,EAERI,EAAe,eAAYZ,EAAZ,eAAgC,IAANW,EAA1B,aAA2D,IAAbT,EAA9C,OAGrBL,EAAMF,KAEE,wBAAIkB,IAAG,UAAOnB,EAAP,YAAkBgB,IACrB,kBAAC,IAAMI,SAAP,CAAgBC,SAAU,yBAAKC,UAAU,oCACrC,kBAACpD,EAAD,CACIa,SAAWA,EACXwC,SAAWrB,KAAKpB,cAChBoC,gBAAkBA,EAClBM,OAAStB,KAAK5B,MAAMC,OACpBkD,IAAM1C,EAAWmB,KAAK5B,MAAMG,UAAY,UAShE,IAAMiD,EAASxB,KAAK1B,MAAMD,OACpB,KAEE,4BAAQ+C,UAAU,YACd,0BAAMA,UAAU,SAAhB,QACA,4BACIK,KAAK,SACLL,UAAU,0DACVM,QAAU1B,KAAKvB,gBAEf,wCAEI,0BAAMkD,KAAK,MAAMC,aAAW,eAA5B,kBAGR,0BAAMR,UAAU,SAAhB,SAKZ,OACI,6BAASA,UAAU,aACf,gCACI,gDAEI,yBAAKA,UAAU,WACX,wCAAetB,MAI3B,wBACIsB,UAAU,QACVS,MACI,CACIC,oBAAoB,WAAD,OAAc5B,EAAd,WACnB6B,iBAAiB,WAAD,OAAc5B,EAAd,aAItBF,GAEJuB,O,GAxLgBvD,IAAM+D","file":"static/js/9.038b885e.chunk.js","sourcesContent":["// React\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// Third parties\nimport Swal from 'sweetalert2';\n\n// Style\nimport './Style.scss';\n\n// Components\nconst Box = React.lazy(\n    () => import(\n        '../../components/Box/Box'\n    )\n);\n\n// Declaration\nexport default class Play extends React.Component {\n\n    state = {\n        played: this.props.played,\n        winnerBox: React.createRef(),\n    };\n\n    handleCheating = () => {\n\n        this.state.winnerBox && this.state.winnerBox.current && this.state.winnerBox.current.handleClick();\n\n    };\n\n    handleResults = async isWinner => {\n\n        const {\n            history,\n            location: { pathname },\n        } = this.props;\n\n        let url = pathname;\n\n        ! this.props.played && this.setState(\n            {\n                played: true,\n            }\n        );\n\n        const message = isWinner\n            ? {\n                title: 'Yeah ðŸŽ‰',\n                text: 'Fly to the next level!',\n                icon: 'success',\n            }\n            : {\n                title: 'Ops.. ðŸ˜Ÿ',\n                text: 'You clicked the wrong box',\n                icon: 'error',\n            }\n        ;\n\n        await Swal.fire(\n            {\n                ... message,\n                timer: 6300,\n                timerProgressBar: true,\n                showCancelButton: false,\n                showConfirmButton: false,\n            }\n        );\n\n        if( isWinner ) {\n\n            switch( pathname ) {\n                case '/hard':\n                    url = `/you-win/${ this.props.level }`;\n                    break;\n                case '/medium':\n                    url = '/hard';\n                    break;\n                case '/easy':\n                default:\n                    url = '/medium';\n            }\n\n        } else\n            url = `/game-over/${ this.props.level }`;\n\n        history.push(\n            url\n        );\n\n    };\n\n    componentDidUpdate( { played } ) {\n\n        if( played !== this.props.played ) {\n\n            this.setState(\n                {\n                    played: this.props.played,\n                }\n            );\n\n        }\n\n    }\n\n    render() {\n\n        // Boxes\n        const boxes = []\n            // Data\n            , {\n                level,\n                columns,\n                rows,\n                hue,\n                luminosity,\n                saturation,\n            } = this.props\n            , numberOfBoxes = columns * rows\n            , thebox = Math.floor(\n                Math.random() * Math.floor(\n                    columns * rows\n                )\n            )\n            // Colors\n            , luxRangeMin = Math.random()\n            , luxRangeMax = Math.random()\n            , luxMax = luminosity * luxRangeMin * 0.6\n            , luxMin = 1 - ( luminosity * luxRangeMax ) * 0.6\n        ;\n\n        for( let index = 0; index < numberOfBoxes; index ++ ) {\n\n            const isWinner = index === thebox\n                , lux = (\n                    isWinner\n                        ? luxMin\n                        : luxMax\n                )\n                , backgroundColor = `hsl( ${ hue }deg ${ ( lux * 100 ) }% ${ ( saturation * 100 ) }% )`\n            ;\n\n            boxes.push(\n                (\n                    <li key={ `${ level }-${ index }` }>\n                        <React.Suspense fallback={<div className=\"loading spinner spinner--small\" />}>\n                            <Box\n                                isWinner={ isWinner }\n                                onResult={ this.handleResults }\n                                backgroundColor={ backgroundColor }\n                                reveal={ this.state.played }\n                                ref={ isWinner ? this.state.winnerBox : null }\n                            />\n                        </React.Suspense>\n                    </li>\n                )\n            );\n\n        }\n\n        const footer = this.props.played\n            ? null\n            : (\n                <footer className=\"cheating\">\n                    <span className=\"arrow\">&raquo;</span>\n                    <button\n                        type=\"button\"\n                        className=\"btn btn--medium btn btn--border text--white bg--primary\"\n                        onClick={ this.handleCheating }\n                    >\n                        <strong>\n                            CHEAT\n                            <span role=\"img\" aria-label=\"Angry Emoji\">ðŸ˜¤</span>\n                        </strong>\n                    </button>\n                    <span className=\"arrow\">&laquo;</span>\n                </footer>\n            )\n        ;\n\n        return (\n            <section className=\"page play\">\n                <header>\n                    <h3>\n                        [ Spot the tile ]\n                        <sup className=\"counter\">\n                            <small>level { level }</small>\n                        </sup>\n                    </h3>\n                </header>\n                <ul\n                    className=\"board\"\n                    style={\n                        {\n                            gridTemplateColumns: `repeat( ${ columns }, 1fr )`,\n                            gridTemplateRows: `repeat( ${ rows }, 1fr )`,\n                        }\n                    }\n                >\n                    { boxes }\n                </ul>\n                { footer }\n            </section>\n        );\n\n    }\n\n}\n\n// Validations\nPlay.propTypes = {\n    // Grid game\n    level: PropTypes.oneOfType(\n        [\n            PropTypes.string,\n            PropTypes.number,\n        ]\n    ),\n    columns: PropTypes.string,\n    rows: PropTypes.string,\n    played: PropTypes.bool,\n    // Colors\n    hue: PropTypes.number.isRequired,\n    luminosity: PropTypes.number.isRequired,\n    saturation: PropTypes.number.isRequired,\n    // Router\n    history: PropTypes.shape(\n        {\n            push: PropTypes.func.isRequired,\n        }\n    ),\n    location: PropTypes.shape(\n        {\n            pathname: PropTypes.string.isRequired,\n        }\n    ),\n};\n"],"sourceRoot":""}